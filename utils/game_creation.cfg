#define CAMPAIGN_CREATION_OPTIONS
	{VARIABLE uws_game.map_id 6}
	{VARIABLE used_items_list "hp_low"} # remove hp_low item from possible items in the default campaign because it's a side quest reward
	{VARIABLE uws_game.process_spawn_table yes}
	
	[fire_event]
		name=init_and_replace_map_mask
	[/fire_event]

#	hide the choice since it's only one option
#	[message]
#		speaker=narrator
#		caption="Lord Master of All Wesnoth"
#		image="portraits/uws/razerman.png"
#		message="Welcome to the Quequo's Ultimate Wesnoth Survival Campaign. Before you can begin the game you must choose the campaign first:"
#		[option]
#			message="Return from Captivity - <span color='#37b84c'>5</span> scenarios, total <span color='#37b84c'>164</span> turns"
#			[command]
#				{VARIABLE uws_game.map_id 6}
#				{VARIABLE used_items_list "hp_low"}

#				[fire_event]
#					name=init_and_replace_map_mask
#				[/fire_event]
#			[/command]
#		[/option]
#	[/message]
	
	{VARIABLE uws_game.remove_wall no}
	{VARIABLE uws_game.spawn_hidden_leaders yes}
	{VARIABLE after_games.enable_spawn_copy_debuff no}
	
	[switch]
		variable=uws_game.mode
		
		[case]
			value=scroll
			
			{VARIABLE uws_game.scroll normal}
			{VARIABLE uws_game.mode_readable Scroll}
			{VARIABLE uws_game.loyal_units yes}
			{VARIABLE uws_game.is_pvp no}
			{VARIABLE uws_game.is_open_world no}
			{VARIABLE uws_game.game_mode_info "Run away from lava and fight through the hordes of enemies."}
			{VARIABLE uws_game.win_condition "Get all the way to the end and defeat the Butcher of Wesnoth"}
			{VARIABLE uws_game.objective_notes "You pay no upkeep for your troops, and earn no income from villages.
You can get gold from some enemies or casual treasures.
Letting a unit be reached by the lava means its immediate death.
You will find special areas during your trip, in which you can heal your units or get random upgrades."}
			
			
			[switch]
				variable=uws_game.difficulty_readable
				
				[case]
					value=Easy
					
					{VARIABLE uws_game.difficulty 2}
					{VARIABLE uws_game.spawn_easy_enemies yes}
					{VARIABLE uws_game.buff_modifier 0.75}
					{VARIABLE uws_game.small_buff_bonus 0}
					{VARIABLE uws_game.micro_buff_bonus 0}
					{VARIABLE uws_game.starting_gold 100}
					{VARIABLE uws_game.leader_can_die yes}
					{VARIABLE uws_game.lose_condition "Your army is defeated."}
				[/case]
				
				[case]
					value=Normal
					
					{VARIABLE uws_game.difficulty 2}
					{VARIABLE uws_game.buff_modifier 1}
					{VARIABLE uws_game.small_buff_bonus 0}
					{VARIABLE uws_game.micro_buff_bonus 0}
					{VARIABLE uws_game.starting_gold 100}
					{VARIABLE uws_game.leader_can_die yes}
					{VARIABLE uws_game.lose_condition "Your army is defeated."}
				[/case]
				
				[case]
					value=Hard
					
					{VARIABLE uws_game.difficulty 3}
					{VARIABLE uws_game.buff_modifier 1.1}
					{VARIABLE uws_game.small_buff_bonus 5}
					{VARIABLE uws_game.micro_buff_bonus 0}
					{VARIABLE uws_game.starting_gold 90}
					{VARIABLE uws_game.leader_can_die no}
					{VARIABLE uws_game.lose_condition "Your leader is defeated."}
					{VARIABLE kval_base 1}
				[/case]
				
				[case]
					value=Hardcore
					
					{VARIABLE uws_game.difficulty 4}
					{VARIABLE uws_game.buff_modifier 1.25}
					{VARIABLE uws_game.small_buff_bonus 10}
					{VARIABLE uws_game.micro_buff_bonus 5}
					{VARIABLE uws_game.starting_gold 85}
					{VARIABLE uws_game.leader_can_die no}
					{VARIABLE uws_game.lose_condition "Your leader is defeated."}
					{VARIABLE uws_game.max_items_per_unit 2}
					{VARIABLE kval_base 2}
				[/case]
			[/switch]
			
			[message]
				speaker=narrator
				caption="Scholar of Black Fire"
				image="portraits/uws/tineen.png"
				message="Welcome to the Quequo's Ultimate Wesnoth Survival Campaign. Before you can begin the game you must choose some game settings first. Would you like to gamble with wesnoth RNG? (unit levels are always maintained)"
				[option]
					message="No, give me the predefined enemies, always the same"
					[command]
						{VARIABLE uws_game.random_enemies no}
						{VARIABLE uws_game.full_random no}
					[/command]
					[show_if]
						[variable]
							name=uws_game.allow_predefined
							boolean_equals=yes
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="Yes, give me random enemies, mirrored for each player"
					[command]
						{VARIABLE uws_game.random_enemies yes}
						{VARIABLE uws_game.full_random no}
					[/command]
				[/option]
				[option]
					message="Full random, each player gets different enemies"
					[command]
						{VARIABLE uws_game.random_enemies yes}
						{VARIABLE uws_game.full_random yes}
					[/command]
				[/option]
			[/message]
			
			[message]
				speaker=narrator
				caption="Ancient Oak of Forgotten Age"
				image="portraits/uws/shaman.png"
				message="Choose between helper labels and fog mode."
				[option]
					message="Labels indicating coming enemies without fog"
					[command]
						{VARIABLE uws_game.fog_mode no}
						{VARIABLE uws_game.minimum_info_labels no}
					[/command]
					
				[/option]
				[option]
					message="Helper labels showing enemy levels with fog"
					[command]
						{VARIABLE uws_game.fog_mode no}
						{VARIABLE uws_game.minimum_info_labels yes}
						
						[modify_side]
							[filter_side]
								side=$uws_game.filter_human_sides
							[/filter_side]
							
							fog=yes
						[/modify_side]
					[/command]
					
				[/option]
				[option]
					message="Full fog mode"
					[command]
						{VARIABLE uws_game.fog_mode yes}
						
						[modify_side]
							[filter_side]
								side=$uws_game.filter_human_sides
							[/filter_side]
							
							fog=yes
						[/modify_side]
					[/command]
				[/option]
			[/message]
			
			[if]
				[variable]
					name=uws_game.single_player_game
					boolean_equals=yes
				[/variable]
				[then]
					{VARIABLE uws_game.remove_wall no}
				[/then]
				[else]
					[message]
						speaker=narrator
						caption="Undisputed Jungle Spearmaster"
						image="portraits/uws/saurian-alt.png"
						message="What about the wall in between the players?"
						[option]
							message="Keep the wall"
							[command]
								{VARIABLE uws_game.remove_wall no}
							[/command]
						[/option]
						[option]
							message="Remove the wall for a cooperative game"
							[command]
								{VARIABLE uws_game.remove_wall yes}
								{VARIABLE uws_game.shared_gold yes}
								{SCROLL_REMOVE_WALL_IF_COOP}
							[/command]
						[/option]
					[/message]
				[/else]
			[/if]
		[/case]
		
		[case]
			value=slash
			
			{VARIABLE uws_game.scroll slow}
			{VARIABLE uws_game.mode_readable "Hack'n Slash"}
			{VARIABLE uws_game.loyal_units yes}
			{VARIABLE uws_game.is_pvp no}
			{VARIABLE uws_game.is_open_world yes}
			{VARIABLE uws_game.game_mode_info "Fight through the hordes of enemies, hunting down the Butcher of Wesnoth."}
			{VARIABLE uws_game.win_condition "Get all the way to the end and defeat the Butcher of Wesnoth"}
			{VARIABLE uws_game.objective_notes "You pay no upkeep for your troops, and earn no income from villages.
You can get gold from some enemies or casual treasures.
Letting a unit be reached by the lava means its immediate death.
You will find special areas during your trip, in which you can heal your units or get random upgrades."}
			
			{VARIABLE starting_gold_easy 70}
			{VARIABLE starting_gold_normal 70}
			{VARIABLE starting_gold_hard 65}
			{VARIABLE starting_gold_hardcore 60}
			{VARIABLE uws_game.shared_gold yes}
			
			[if]
				[variable]
					name=uws_game.single_player_game
					boolean_equals=yes
				[/variable]
				[then]
					{VARIABLE starting_gold_easy 150}
					{VARIABLE starting_gold_normal 150}
					{VARIABLE starting_gold_hard 135}
					{VARIABLE starting_gold_hardcore 125}
					{VARIABLE uws_game.shared_gold no}
				[/then]
			[/if]

			[message]
				speaker=narrator
				caption="Guardian of the Temple of the Moon"
				image="portraits/uws/warg.png"
				message="Welcome to the Quequo's Ultimate Wesnoth Survival Campaign. Before you can begin the game you must choose some game settings first. Do you want to play on one side or both sides of the map?"
				[option]
					message="One side, just like the original Hack'n Slash."
					[command]
						{VARIABLE uws_game.hns_single_side yes}
					[/command]
				[/option]
				[option]
					message="Both sides, no wall in the middle."
					[command]
						{VARIABLE uws_game.hns_single_side no}
						{VARIABLE uws_game.hns_keep_wall no}
						
						{VARIABLE_OP starting_gold_easy multiply 2}
						{VARIABLE_OP starting_gold_normal multiply 2}
						{VARIABLE_OP starting_gold_hard multiply 2}
						{VARIABLE_OP starting_gold_hardcore multiply 2}

						[fire_event]
							name=slash_set_map_both_sides
						[/fire_event]
					[/command]
				[/option]
				[option]
					message="Both sides, players are separated by a wall."
					[command]
						{VARIABLE uws_game.hns_single_side no}
						{VARIABLE uws_game.hns_keep_wall yes}
						
						{VARIABLE_OP starting_gold_easy multiply 2}
						{VARIABLE_OP starting_gold_normal multiply 2}
						{VARIABLE_OP starting_gold_hard multiply 2}
						{VARIABLE_OP starting_gold_hardcore multiply 2}

						[fire_event]
							name=slash_set_map_both_sides
						[/fire_event]
					[/command]
				[/option]
			[/message]
			
			[switch]
				variable=uws_game.difficulty_readable
				
				[case]
					value=Easy
					
					{VARIABLE uws_game.difficulty 4}
					{VARIABLE uws_game.spawn_easy_enemies yes}
					{VARIABLE uws_game.buff_modifier 0.75}
					{VARIABLE uws_game.small_buff_bonus 0}
					{VARIABLE uws_game.micro_buff_bonus 0}
					{VARIABLE uws_game.starting_gold $starting_gold_easy}
					{VARIABLE uws_game.leader_can_die yes}
					{VARIABLE uws_game.lose_condition "Your army is defeated."}
				[/case]
				
				[case]
					value=Normal
					
					{VARIABLE uws_game.difficulty 4}
					{VARIABLE uws_game.buff_modifier 1}
					{VARIABLE uws_game.small_buff_bonus 0}
					{VARIABLE uws_game.micro_buff_bonus 0}
					{VARIABLE uws_game.starting_gold $starting_gold_normal}
					{VARIABLE uws_game.leader_can_die yes}
					{VARIABLE uws_game.lose_condition "Your army is defeated."}
				[/case]
				
				[case]
					value=Hard
					
					{VARIABLE uws_game.difficulty 6}
					{VARIABLE uws_game.buff_modifier 1.1}
					{VARIABLE uws_game.small_buff_bonus 5}
					{VARIABLE uws_game.micro_buff_bonus 0}
					{VARIABLE uws_game.starting_gold $starting_gold_hard}
					{VARIABLE uws_game.leader_can_die no}
					{VARIABLE uws_game.lose_condition "Your leader is defeated."}
					{VARIABLE kval_base 1}
				[/case]
				
				[case]
					value=Hardcore
					
					{VARIABLE uws_game.difficulty 7}
					{VARIABLE uws_game.buff_modifier 1.25}
					{VARIABLE uws_game.small_buff_bonus 10}
					{VARIABLE uws_game.micro_buff_bonus 5}
					{VARIABLE uws_game.starting_gold $starting_gold_hardcore}
					{VARIABLE uws_game.leader_can_die no}
					{VARIABLE uws_game.lose_condition "Your leader is defeated."}
					{VARIABLE uws_game.max_items_per_unit 2}
					{VARIABLE kval_base 2}
				[/case]
			[/switch]
			
			{CLEAR_VARIABLE starting_gold_easy}
			{CLEAR_VARIABLE starting_gold_normal}
			{CLEAR_VARIABLE starting_gold_hard}
			{CLEAR_VARIABLE starting_gold_hardcore}
			
			[if]
				[variable]
					name=uws_game.allow_predefined
					boolean_equals=yes
				[/variable]
				[then]
					[message]
						speaker=narrator
						caption="Guardian of the Temple of the Moon"
						image="portraits/uws/warg.png"
						message="Would you like to gamble with wesnoth RNG? (unit levels are always maintained)"
						[option]
							message="No, give me the predefined enemies, always the same"
							[command]
								{VARIABLE uws_game.random_enemies no}
								{VARIABLE uws_game.fog_mode no}
								{VARIABLE uws_game.full_random no}
							[/command]
						[/option]
						[option]
							message="Yes, give me random enemies"
							[command]
								{VARIABLE uws_game.random_enemies yes}
								{VARIABLE uws_game.fog_mode no}
								{VARIABLE uws_game.full_random no}
							[/command]
						[/option]
					[/message]
				[/then]
				[else]
					{VARIABLE uws_game.random_enemies yes}
					{VARIABLE uws_game.fog_mode no}
					{VARIABLE uws_game.full_random no}
				[/else]
			[/if]
		[/case]
	[/switch]
	
	{GENERATE_RANK_RELATED_VARIABLES}
	{GENERATE_GAME_DESCRIPTION_AFTER_SETTINGS}
#enddef

#define CAMPAIGN_SCENARIO_PREPARE
	[fire_event]
		name=init_and_replace_map_mask
	[/fire_event]

	[if]
		[variable]
			name=uws_game.mode
			equals=slash
		[/variable]
		[then]
			[if]
				[variable]
					name=uws_game.hns_single_side
					boolean_equals=no
				[/variable]
				[then]
				[fire_event]
						name=slash_set_map_both_sides
					[/fire_event]
				[/then]
			[/if]
		[/then]
	[/if]
	
	{GENERATE_GAME_DESCRIPTION_AFTER_SETTINGS}
#enddef

#define GAME_CREATION_OPTIONS
	{VARIABLE uws_game.is_random_map no}
	{VARIABLE uws_game.process_spawn_table yes}
	
	[switch]
		variable=uws_game.mode

		[case]
			value=arena

			{VARIABLE uws_game.map_id 19}

			[fire_event]
				name=init_and_replace_map_mask
			[/fire_event]
		[/case]
		[else]
			[message]
				speaker=narrator
				caption="Lord Master of All Wesnoth"
				image="portraits/uws/razerman.png"
				message="Welcome to the Quequo's Ultimate Wesnoth Survival. Before you can begin the game you must choose the scenario first:"
				[option]
					message="Eastern Shore - <span color='#6cd15c'>22</span> hex turns"
					[command]
						{VARIABLE uws_game.map_id 12}
						
						[fire_event]
							name=init_and_replace_map_mask
						[/fire_event]
					[/command]
					[show_if]
						[variable]
							name=uws_game.mode
							formula="if(index_of(value, ['scroll', 'race', 'slash']) > -1, 1, 0)"
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="Invaded Forests - <span color='#37b84c'>40</span> hex turns"
					[command]
						{VARIABLE uws_game.map_id 0}
						
						[fire_event]
							name=init_and_replace_map_mask
						[/fire_event]
					[/command]
					[show_if]
						[variable]
							name=uws_game.mode
							formula="if(index_of(value, ['scroll', 'race', 'slash']) > -1, 1, 0)"
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="Dwarvish Mountains - <span color='#76a349'>48</span> hex turns"
					[command]
						{VARIABLE uws_game.map_id 3}
						
						[fire_event]
							name=init_and_replace_map_mask
						[/fire_event]
					[/command]
					[show_if]
						[variable]
							name=uws_game.mode
							formula="if(index_of(value, ['scroll', 'race', 'slash']) > -1, 1, 0)"
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="Dimaga Beach - <span color='#c2c938'>55</span> hex turns"
					[command]
						{VARIABLE uws_game.map_id 5}
						
						[fire_event]
							name=init_and_replace_map_mask
						[/fire_event]
					[/command]
					[show_if]
						[variable]
							name=uws_game.mode
							formula="if(index_of(value, ['scroll', 'race', 'slash']) > -1, 1, 0)"
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="Original TSW - <span color='#cfa438'>60</span> hex turns"
					[command]
						{VARIABLE uws_game.map_id 1}
						
						[fire_event]
							name=init_and_replace_map_mask
						[/fire_event]
					[/command]
					[show_if]
						[variable]
							name=uws_game.mode
							formula="if(index_of(value, ['scroll', 'race', 'slash']) > -1, 1, 0)"
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="The Great Waters - <span color='#c96c2e'>69</span> hex turns"
					[command]
						{VARIABLE uws_game.map_id 2}
						
						[fire_event]
							name=init_and_replace_map_mask
						[/fire_event]
					[/command]
					[show_if]
						[variable]
							name=uws_game.mode
							formula="if(index_of(value, ['scroll', 'race', 'slash']) > -1, 1, 0)"
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="Valley of the Necromancer - <span color='#c94f36'>160</span> hex turns"
					[command]
						{VARIABLE uws_game.map_id 4}
						
						[fire_event]
							name=init_and_replace_map_mask
						[/fire_event]
					[/command]
					[show_if]
						[variable]
							name=uws_game.mode
							formula="if(index_of(value, ['scroll', 'race', 'slash']) > -1, 1, 0)"
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="Original Afterlife (7x13)"
					[command]
						{VARIABLE uws_game.map_id 16}
						
						[fire_event]
							name=init_and_replace_map_mask
						[/fire_event]
					[/command]
					[show_if]
						[variable]
							name=uws_game.mode
							equals=after_classic
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="After Classic #1 (13x17)"
					[command]
						{VARIABLE uws_game.map_id 13}
						
						[fire_event]
							name=init_and_replace_map_mask
						[/fire_event]
					[/command]
					[show_if]
						[variable]
							name=uws_game.mode
							equals=after_classic
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="After Classic #2 (13x18)"
					[command]
						{VARIABLE uws_game.map_id 14}
						
						[fire_event]
							name=init_and_replace_map_mask
						[/fire_event]
					[/command]
					[show_if]
						[variable]
							name=uws_game.mode
							equals=after_classic
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="After Classic #3 (11x15)"
					[command]
						{VARIABLE uws_game.map_id 15}
						
						[fire_event]
							name=init_and_replace_map_mask
						[/fire_event]
					[/command]
					[show_if]
						[variable]
							name=uws_game.mode
							equals=after_classic
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="After Classic #4 (8x15)"
					[command]
						{VARIABLE uws_game.map_id 17}
						
						[fire_event]
							name=init_and_replace_map_mask
						[/fire_event]
					[/command]
					[show_if]
						[variable]
							name=uws_game.mode
							equals=after_classic
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="Original Afterlife Race (17x41)"
					[command]
						{VARIABLE uws_game.map_id 21}
						
						[fire_event]
							name=init_and_replace_map_mask
						[/fire_event]
					[/command]
					[show_if]
						[variable]
							name=uws_game.mode
							equals=after_race
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="After Race #1 (19x41)"
					[command]
						{VARIABLE uws_game.map_id 20}
						
						[fire_event]
							name=init_and_replace_map_mask
						[/fire_event]
					[/command]
					[show_if]
						[variable]
							name=uws_game.mode
							equals=after_race
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="After Race #2 (19x41)"
					[command]
						{VARIABLE uws_game.map_id 22}
						
						[fire_event]
							name=init_and_replace_map_mask
						[/fire_event]
					[/command]
					[show_if]
						[variable]
							name=uws_game.mode
							equals=after_race
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="Pillagers #1"
					[command]
						{VARIABLE uws_game.map_id 18}
						
						[fire_event]
							name=init_and_replace_map_mask
						[/fire_event]
					[/command]
					[show_if]
						[variable]
							name=uws_game.mode
							equals=pillagers
						[/variable]
					[/show_if]
				[/option]
				# [option]
				# 	message="Random generated map"
				# 	[command]
				# 		# TODO remove once the generation code is done
				# 		{VARIABLE uws_game.map_id 0}
				# 		# TODO remove once the generation code is done
						
				# 		{VARIABLE uws_game.is_random_map yes}
				# 	[/command]
				# [/option]
			[/message]
		[/else]
	[/switch]
	
	[if]
		[variable]
			name=uws_game.is_random_map
			boolean_equals=yes
		[/variable]
		[then]
			[message]
				speaker=narrator
				caption="Elf Queen of the Silver Forest"
				image="portraits/uws/elf-mystic.png"
				message="How long you want the mission to be?"
				[option]
					message="Short - 25 turns"
					[command]
						{VARIABLE uws_game.random_map_length 25}
					[/command]
				[/option]
				[option]
					message="Medium - 40 turns"
					[command]
						{VARIABLE uws_game.random_map_length 40}
					[/command]
				[/option]
				[option]
					message="Long - 60 turns"
					[command]
						{VARIABLE uws_game.random_map_length 60}
					[/command]
				[/option]
				[option]
					message="Half-marathon - 80 turns"
					[command]
						{VARIABLE uws_game.random_map_length 80}
					[/command]
				[/option]
				[option]
					message="Marathon - 160 turns"
					[command]
						{VARIABLE uws_game.random_map_length 160}
					[/command]
				[/option]
			[/message]
			
			[message]
				speaker=narrator
				caption="Fire Lord of the Black Dune Sultanat"
				image="portraits/uws/tineen.png"
				message="Would you like the Wesnoth RNG to generate the random map seed, or prefer to provide your own?"
				[option]
					message="Generate one for me please"
					[command]
						{VARIABLE uws_game.generate_random_seed yes}
					[/command]
				[/option]
				[option]
					message="No, I want the map to be generated based on my input"
					[command]
						{VARIABLE uws_game.generate_random_seed no}
					[/command]
				[/option]
			[/message]
			
			[if]
				[variable]
					name=uws_game.generate_random_seed
					equals=yes
				[/variable]
				[then]
					# TODO call lua function to generate random seed in sync context
				[/then]
				[else]
					[message]
						speaker=narrator
						caption="Black Bane of Balamour"
						image="portraits/uws/black-cat.png"
						message="Enter 8 alphanumerical characters for the random map seed (case sensitive):"

						[text_input]
							variable=uws_game.random_map_seed
							label="Seed:"
						[/text_input]
					[/message]
				[/else]
			[/if]
		[/then]
	[/if]
	
	{VARIABLE uws_game.remove_wall no}
	{VARIABLE uws_game.spawn_hidden_leaders yes}
	{VARIABLE after_games.enable_spawn_copy_debuff no}
	
	[switch]
		variable=uws_game.mode
		
		[case]
			value=scroll
			
			{VARIABLE uws_game.scroll normal}
			{VARIABLE uws_game.mode_readable Scroll}
			{VARIABLE uws_game.loyal_units yes}
			{VARIABLE uws_game.is_pvp no}
			{VARIABLE uws_game.is_open_world no}
			{VARIABLE uws_game.game_mode_info "Run away from lava and fight through the hordes of enemies."}
			{VARIABLE uws_game.win_condition "Get all the way to the end and defeat the Butcher of Wesnoth"}
			{VARIABLE uws_game.objective_notes "You pay no upkeep for your troops, and earn no income from villages.
You can get gold from some enemies or casual treasures.
Letting a unit be reached by the lava means its immediate death.
You will find special areas during your trip, in which you can heal your units or get random upgrades."}
			
			[if]
				[variable]
					name=uws_game.single_player_game
					boolean_equals=yes
				[/variable]
				[then]
					{VARIABLE uws_game.remove_wall no}
				[/then]
				[else]
					[message]
						speaker=narrator
						caption="Undisputed Jungle Spearmaster"
						image="portraits/uws/saurian-alt.png"
						message="What about the wall in between the players?"
						[option]
							message="Keep the wall"
							[command]
								{VARIABLE uws_game.remove_wall no}
							[/command]
						[/option]
						[option]
							message="Remove the wall for a cooperative game"
							[command]
								{VARIABLE uws_game.remove_wall yes}
								{VARIABLE uws_game.shared_gold yes}
								{SCROLL_REMOVE_WALL_IF_COOP}
							[/command]
						[/option]
					[/message]
				[/else]
			[/if]
			
			[message]
				speaker=narrator
				caption="Eternal Bones of the Nameless One"
				image="portraits/uws/cloaked.png"
				message="Choose your challenge now:"
				[option]
					message="<span color='#90d117'>Easy</span> - weaker enemies, 75% bonus penalty, 100 gold, leader <span color='#42a83e'>can</span> die"
					[command]
						{VARIABLE uws_game.difficulty_readable Easy}
						{VARIABLE uws_game.spawn_easy_enemies yes}
						{VARIABLE uws_game.difficulty 2}
						{VARIABLE uws_game.buff_modifier 0.75}
						{VARIABLE uws_game.small_buff_bonus 0}
						{VARIABLE uws_game.micro_buff_bonus 0}
						{VARIABLE uws_game.starting_gold 100}
						{VARIABLE uws_game.leader_can_die yes}
						{VARIABLE uws_game.lose_condition "Your army is defeated."}
					[/command]
				[/option]
				[option]
					message="<span color='#f5a720'>Normal</span> - standard enemies, 75% bonus penalty, 100 gold, leader <span color='#42a83e'>can</span> die"
					[command]
						{VARIABLE uws_game.difficulty_readable Normal}
						{VARIABLE uws_game.difficulty 2}
						{VARIABLE uws_game.buff_modifier 1}
						{VARIABLE uws_game.small_buff_bonus 0}
						{VARIABLE uws_game.micro_buff_bonus 0}
						{VARIABLE uws_game.starting_gold 100}
						{VARIABLE uws_game.leader_can_die yes}
						{VARIABLE uws_game.lose_condition "Your army is defeated."}
					[/command]
				[/option]
				[option]
					message="<span color='#eb6e2a'>Hard</span> - a few extra enemies, 115% bonus penalty, 90 gold, leader <span color='#f02d26'>must not</span> die"
					[command]
						{VARIABLE uws_game.difficulty_readable Hard}
						{VARIABLE uws_game.difficulty 3}
						{VARIABLE uws_game.buff_modifier 1.15}
						{VARIABLE uws_game.small_buff_bonus 5}
						{VARIABLE uws_game.micro_buff_bonus 0}
						{VARIABLE uws_game.starting_gold 90}
						{VARIABLE uws_game.leader_can_die no}
						{VARIABLE uws_game.lose_condition "Your leader is defeated."}
						{VARIABLE kval_base 1}
					[/command]
				[/option]
				[option]
					message="<span color='#853431'>Hardcore</span> - extra enemies, 125% bonus penalty, 85 gold, leader <span color='#f02d26'>must not</span> die"
					[command]
						{VARIABLE uws_game.difficulty_readable Hardcore}
						{VARIABLE uws_game.difficulty 4}
						{VARIABLE uws_game.buff_modifier 1.25}
						{VARIABLE uws_game.small_buff_bonus 10}
						{VARIABLE uws_game.micro_buff_bonus 5}
						{VARIABLE uws_game.starting_gold 85}
						{VARIABLE uws_game.leader_can_die no}
						{VARIABLE uws_game.lose_condition "Your leader is defeated."}
						{VARIABLE uws_game.max_items_per_unit 2}
						{VARIABLE kval_base 2}
					[/command]
				[/option]
			[/message]
			
			[message]
				speaker=narrator
				caption="Scholar of Black Fire"
				image="portraits/uws/tineen.png"
				message="Do you also want to gamble with wesnoth RNG? (unit levels are always maintained)"
				[option]
					message="No, give me the predefined enemies, always the same"
					[command]
						{VARIABLE uws_game.random_enemies no}
						{VARIABLE uws_game.full_random no}
					[/command]
					[show_if]
						[variable]
							name=uws_game.allow_predefined
							boolean_equals=yes
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="Yes, give me random enemies, mirrored for each player"
					[command]
						{VARIABLE uws_game.random_enemies yes}
						{VARIABLE uws_game.full_random no}
					[/command]
				[/option]
				[option]
					message="Full random, each player gets different enemies"
					[command]
						{VARIABLE uws_game.random_enemies yes}
						{VARIABLE uws_game.full_random yes}
					[/command]
				[/option]
			[/message]
			
			[message]
				speaker=narrator
				caption="Ancient Oak of Forgotten Age"
				image="portraits/uws/shaman.png"
				message="Choose between helper labels and fog mode."
				[option]
					message="Labels indicating coming enemies without fog"
					[command]
						{VARIABLE uws_game.fog_mode no}
						{VARIABLE uws_game.minimum_info_labels no}
					[/command]
					
				[/option]
				[option]
					message="Helper labels showing enemy levels with fog"
					[command]
						{VARIABLE uws_game.fog_mode no}
						{VARIABLE uws_game.minimum_info_labels yes}
						
						[modify_side]
							[filter_side]
								side=$uws_game.filter_human_sides
							[/filter_side]
							
							fog=yes
						[/modify_side]
					[/command]
					
				[/option]
				[option]
					message="Full fog mode"
					[command]
						{VARIABLE uws_game.fog_mode yes}
						
						[modify_side]
							[filter_side]
								side=$uws_game.filter_human_sides
							[/filter_side]
							
							fog=yes
						[/modify_side]
					[/command]
				[/option]
			[/message]
		[/case]
		
		[case]
			value=slash
			
			{VARIABLE uws_game.scroll slow}
			{VARIABLE uws_game.mode_readable "Hack'n Slash"}
			{VARIABLE uws_game.loyal_units yes}
			{VARIABLE uws_game.is_pvp no}
			{VARIABLE uws_game.is_open_world yes}
			{VARIABLE uws_game.game_mode_info "Fight through the hordes of enemies, hunting down the Butcher of Wesnoth."}
			{VARIABLE uws_game.win_condition "Get all the way to the end and defeat the Butcher of Wesnoth"}
			{VARIABLE uws_game.objective_notes "You pay no upkeep for your troops, and earn no income from villages.
You can get gold from some enemies or casual treasures.
Letting a unit be reached by the lava means its immediate death.
You will find special areas during your trip, in which you can heal your units or get random upgrades."}
			
			{VARIABLE starting_gold_easy 70}
			{VARIABLE starting_gold_normal 70}
			{VARIABLE starting_gold_hard 65}
			{VARIABLE starting_gold_hardcore 60}
			{VARIABLE uws_game.shared_gold yes}
			
			[if]
				[variable]
					name=uws_game.single_player_game
					boolean_equals=yes
				[/variable]
				[then]
					{VARIABLE starting_gold_easy 150}
					{VARIABLE starting_gold_normal 150}
					{VARIABLE starting_gold_hard 135}
					{VARIABLE starting_gold_hardcore 125}
					{VARIABLE uws_game.shared_gold no}
				[/then]
			[/if]

			[message]
				speaker=narrator
				caption="Guardian of the Temple of the Moon"
				image="portraits/uws/warg.png"
				message="Do you want to play on one side or both sides of the map?"
				[option]
					message="One side, just like the original Hack'n Slash."
					[command]
						{VARIABLE uws_game.hns_single_side yes}
					[/command]
				[/option]
				[option]
					message="Both sides, no wall in the middle."
					[command]
						{VARIABLE uws_game.hns_single_side no}
						{VARIABLE uws_game.hns_keep_wall no}
						
						{VARIABLE_OP starting_gold_easy multiply 2}
						{VARIABLE_OP starting_gold_normal multiply 2}
						{VARIABLE_OP starting_gold_hard multiply 2}
						{VARIABLE_OP starting_gold_hardcore multiply 2}

						[fire_event]
							name=slash_set_map_both_sides
						[/fire_event]
					[/command]
				[/option]
				[option]
					message="Both sides, players are separated by a wall."
					[command]
						{VARIABLE uws_game.hns_single_side no}
						{VARIABLE uws_game.hns_keep_wall yes}
						{VARIABLE uws_game.shared_gold no}
						
						{VARIABLE_OP starting_gold_easy multiply 2}
						{VARIABLE_OP starting_gold_normal multiply 2}
						{VARIABLE_OP starting_gold_hard multiply 2}
						{VARIABLE_OP starting_gold_hardcore multiply 2}

						[fire_event]
							name=slash_set_map_both_sides
						[/fire_event]
					[/command]
				[/option]
			[/message]
			
			[message]
				speaker=narrator
				caption="Eternal Bones of the Nameless One"
				image="portraits/uws/cloaked.png"
				message="Choose your challenge now:"
				[option]
					message="<span color='#90d117'>Easy</span> - weaker enemies, 75% bonus penalty, $starting_gold_easy gold, leader <span color='#42a83e'>can</span> die"
					[command]
						{VARIABLE uws_game.difficulty_readable Easy}
						{VARIABLE uws_game.spawn_easy_enemies yes}
						{VARIABLE uws_game.difficulty 4}
						{VARIABLE uws_game.buff_modifier 0.75}
						{VARIABLE uws_game.small_buff_bonus 0}
						{VARIABLE uws_game.micro_buff_bonus 0}
						{VARIABLE uws_game.starting_gold $starting_gold_easy}
						{VARIABLE uws_game.leader_can_die yes}
						{VARIABLE uws_game.lose_condition "Your army is defeated."}
					[/command]
				[/option]
				[option]
					message="<span color='#f5a720'>Normal</span> - standard enemies, $starting_gold_normal gold, leader <span color='#42a83e'>can</span> die"
					[command]
						{VARIABLE uws_game.difficulty_readable Normal}
						{VARIABLE uws_game.difficulty 4}
						{VARIABLE uws_game.buff_modifier 1}
						{VARIABLE uws_game.small_buff_bonus 0}
						{VARIABLE uws_game.micro_buff_bonus 0}
						{VARIABLE uws_game.starting_gold $starting_gold_normal}
						{VARIABLE uws_game.leader_can_die yes}
						{VARIABLE uws_game.lose_condition "Your army is defeated."}
					[/command]
				[/option]
				[option]
					message="<span color='#eb6e2a'>Hard</span> - a few extra enemies, 115% bonus penalty, $starting_gold_hard gold, leader <span color='#f02d26'>must not</span> die"
					[command]
						{VARIABLE uws_game.difficulty_readable Hard}
						{VARIABLE uws_game.difficulty 6}
						{VARIABLE uws_game.buff_modifier 1.15}
						{VARIABLE uws_game.small_buff_bonus 5}
						{VARIABLE uws_game.micro_buff_bonus 0}
						{VARIABLE uws_game.starting_gold $starting_gold_hard}
						{VARIABLE uws_game.leader_can_die no}
						{VARIABLE uws_game.lose_condition "Your leader is defeated."}
						{VARIABLE kval_base 1}
					[/command]
				[/option]
				[option]
					message="<span color='#853431'>Hardcore</span> - extra enemies, 125% bonus penalty, $starting_gold_hardcore gold, leader <span color='#f02d26'>must not</span> die"
					[command]
						{VARIABLE uws_game.difficulty_readable Hardcore}
						{VARIABLE uws_game.difficulty 7}
						{VARIABLE uws_game.buff_modifier 1.25}
						{VARIABLE uws_game.small_buff_bonus 10}
						{VARIABLE uws_game.micro_buff_bonus 5}
						{VARIABLE uws_game.starting_gold $starting_gold_hardcore}
						{VARIABLE uws_game.leader_can_die no}
						{VARIABLE uws_game.lose_condition "Your leader is defeated."}
						{VARIABLE uws_game.max_items_per_unit 2}
						{VARIABLE kval_base 2}
					[/command]
				[/option]
				[option]
					message="<span color='#8a2267'>Insane</span> - you must finish hardcore first and find the secret key to enable Insane mode"
					[command]
						{VARIABLE uws_game.difficulty_readable Insane}
						{VARIABLE uws_game.difficulty 8}
						{VARIABLE uws_game.buff_modifier 1.25}
						{VARIABLE uws_game.small_buff_bonus 15}
						{VARIABLE uws_game.micro_buff_bonus 10}
						{VARIABLE uws_game.starting_gold $starting_gold_hardcore}
						{VARIABLE uws_game.leader_can_die no}
						{VARIABLE uws_game.lose_condition "Your leader is defeated."}
						{VARIABLE uws_game.max_items_per_unit 2}
						{VARIABLE kval_base 5}
					[/command]
					[show_if]
						[variable]
							name=uws_game.suid
							not_equals=""
						[/variable]
					[/show_if]
				[/option]
			[/message]

			[if]
				[variable]
					name=uws_game.difficulty_readable
					equals="Insane"
				[/variable]
				[then]
					[message]
					    speaker=narrator
					    caption="One of the Four"
					    image="portraits/undead/skeletal_rider.webp"
					    message="Only those who are worthy may challenge the Gods for the glory and only those who know the secret spell are considered worthy."
					    
					    [text_input]
					    	variable=secret_spell_txt
					    	label="What say you?"
					    [/text_input]
					[/message]

					[qquws_decode_secret]
						message=$uws_game.suid
						key=qq4bwf
						var_name=qquws_secret
					[/qquws_decode_secret]

					[if]
						[variable]
							name=secret_spell_txt
							equals="$qquws_secret"
						[/variable]
						[then]
							[message]
							    speaker=narrator
							    caption="The Mountain God"
							    image="portraits/uws/stone.png"
							    message="The Gods shall descend and crush you like a worm!"
							[/message]
						[/then]
						[else]
							[message]
							    speaker=narrator
							    caption="Last Drake of the Ald√ºn Flame"
							    image="portraits/drakes/burner.webp"
							    message="This spell does NOTHING! The Gods frown upon your challenge! Finish easy mode first before you bother them again!"
							[/message]

							{VARIABLE uws_game.difficulty_readable Hardcore}
							{VARIABLE uws_game.difficulty 7}
							{VARIABLE uws_game.buff_modifier 1.25}
							{VARIABLE uws_game.small_buff_bonus 10}
							{VARIABLE uws_game.micro_buff_bonus 5}
							{VARIABLE uws_game.starting_gold $starting_gold_hardcore}
							{VARIABLE uws_game.leader_can_die no}
							{VARIABLE uws_game.lose_condition "Your leader is defeated."}
							{VARIABLE uws_game.max_items_per_unit 2}
							{VARIABLE kval_base 2}
						[/else]
					[/if]

					{CLEAR_VARIABLE qquws_secret,secret_spell_txt}
				[/then]
			[/if]
			
			{CLEAR_VARIABLE starting_gold_easy}
			{CLEAR_VARIABLE starting_gold_normal}
			{CLEAR_VARIABLE starting_gold_hard}
			{CLEAR_VARIABLE starting_gold_hardcore}
			
			[message]
				speaker=narrator
				caption="Guardian of the Temple of the Moon"
				image="portraits/uws/warg.png"
				message="Do you also want to gamble with wesnoth RNG? (unit levels are always maintained)"
				[option]
					message="No, give me the predefined enemies, always the same"
					[command]
						{VARIABLE uws_game.random_enemies no}
						{VARIABLE uws_game.fog_mode no}
						{VARIABLE uws_game.full_random no}
					[/command]
					[show_if]
						[variable]
							name=uws_game.allow_predefined
							boolean_equals=yes
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="Yes, give me random enemies"
					[command]
						{VARIABLE uws_game.random_enemies yes}
						{VARIABLE uws_game.fog_mode no}
						{VARIABLE uws_game.full_random no}
					[/command]
				[/option]
				[option]
					message="Full random, no mirroring"
					[command]
						{VARIABLE uws_game.random_enemies yes}
						{VARIABLE uws_game.fog_mode no}
						{VARIABLE uws_game.full_random yes}
					[/command]
					[show_if]
						[variable]
							name=uws_game.hns_single_side
							boolean_equals=no
						[/variable]
					[/show_if]
				[/option]
			[/message]
		[/case]
		
		[case]
			value=race
			
			{VARIABLE uws_game.scroll slow}
			{VARIABLE uws_game.mode_readable Race}
			{VARIABLE uws_game.loyal_units no}
			{VARIABLE uws_game.is_pvp yes}
			{VARIABLE uws_game.is_open_world yes}
			{VARIABLE uws_game.game_mode_info "Race to the top! Be faster than your opponent, but be careful not to pull too many enemies at once."}
			{VARIABLE uws_game.win_condition "Race to the top and be te first to capture the flag"}
			{VARIABLE uws_game.objective_notes "You receive gold from villages and all recruited units cost upkeep.
You can get additional gold from some enemies or casual treasures.
Letting a unit be reached by the lava means its immediate death.
You will find special areas during your trip, in which you can heal your units or get random upgrades."}
					
			[message]
				speaker=narrator
				caption="Eternal Bones of the Nameless One"
				image="portraits/uws/cloaked.png"
				message="Choose your challenge now:"
				[option]
					message="<span color='#90d117'>Easy</span> - weaker enemies, 75% bonus penalty, 3g per village, leader <span color='#42a83e'>can</span> die"
					[command]
						{VARIABLE uws_game.difficulty_readable Easy}
						{VARIABLE uws_game.spawn_easy_enemies yes}
						{VARIABLE uws_game.difficulty 4}
						{VARIABLE uws_game.buff_modifier 0.75}
						{VARIABLE uws_game.small_buff_bonus 0}
						{VARIABLE uws_game.micro_buff_bonus 0}
						{VARIABLE uws_game.leader_can_die yes}
						{VARIABLE uws_game.lose_condition "Your army is defeated."}
					[/command]
				[/option]
				[option]
					message="<span color='#f5a720'>Normal</span> - standard enemies, 3g per village, leader <span color='#42a83e'>can</span> die"
					[command]
						{VARIABLE uws_game.difficulty_readable Normal}
						{VARIABLE uws_game.difficulty 4}
						{VARIABLE uws_game.buff_modifier 1}
						{VARIABLE uws_game.small_buff_bonus 0}
						{VARIABLE uws_game.micro_buff_bonus 0}
						{VARIABLE uws_game.leader_can_die yes}
						{VARIABLE uws_game.lose_condition "Your army is defeated."}
					[/command]
				[/option]
				[option]
					message="<span color='#eb6e2a'>Hard</span> - a few extra enemies, 115% bonus penalty, 3g per village, leader <span color='#f02d26'>must not</span> die"
					[command]
						{VARIABLE uws_game.difficulty_readable Hard}
						{VARIABLE uws_game.difficulty 5}
						{VARIABLE uws_game.buff_modifier 1.15}
						{VARIABLE uws_game.small_buff_bonus 5}
						{VARIABLE uws_game.micro_buff_bonus 0}
						{VARIABLE uws_game.leader_can_die no}
						{VARIABLE uws_game.lose_condition "Your leader is defeated."}
						{VARIABLE kval_base 1}
					[/command]
				[/option]
				[option]
					message="<span color='#853431'>Hardcore</span> - extra enemies, 125% bonus penalty, 2g per village, leader <span color='#f02d26'>must not</span> die"
					[command]
						{VARIABLE uws_game.difficulty_readable Hardcore}
						{VARIABLE uws_game.difficulty 6}
						{VARIABLE uws_game.buff_modifier 1.25}
						{VARIABLE uws_game.small_buff_bonus 10}
						{VARIABLE uws_game.micro_buff_bonus 5}
						{VARIABLE uws_game.leader_can_die no}
						{VARIABLE uws_game.lose_condition "Your leader is defeated."}
						{VARIABLE uws_game.max_items_per_unit 2}
						{VARIABLE kval_base 2}

						# village_gold = 1, vilage_support stays the same (1)
						[modify_side]
							[filter_side]
								side=8,9
							[/filter_side]
							
							village_gold=1
						[/modify_side]

						{VARIABLE_OP sides[8].village_income sub 1}
						{VARIABLE_OP sides[9].village_income sub 1}
						{VARIABLE uws_game.basic_village_total 2}
					[/command]
				[/option]
			[/message]
			
			[message]
				speaker=narrator
				caption="Elite Marksman of the Royal Hall"
				image="portraits/uws/crossbowman.png"
				message="How much starting gold should both players receive?"
				[option]
					message="<span color='#90d117'>Plenty</span> - 120 starting gold for a fast paced game"
					[command]
						{VARIABLE uws_game.starting_gold 120}
					[/command]
				[/option]
				[option]
					message="<span color='#f5a720'>Normal</span> - 75 starting gold regular game"
					[command]
						{VARIABLE uws_game.starting_gold 75}
					[/command]
				[/option]
				[option]
					message="<span color='#eb6e2a'>Low</span> - 30 starting gold challenge"
					[command]
						{VARIABLE uws_game.starting_gold 30}
					[/command]
				[/option]
			[/message]
			
			[message]
				speaker=narrator
				caption="Guardian of the Temple of the Moon"
				image="portraits/uws/warg.png"
				message="Do you also want to gamble with wesnoth RNG? (unit levels are always maintained)"
				[option]
					message="No, give me the predefined enemies, always the same"
					[command]
						{VARIABLE uws_game.random_enemies no}
						{VARIABLE uws_game.fog_mode no}
						{VARIABLE uws_game.full_random no}
					[/command]
					[show_if]
						[variable]
							name=uws_game.allow_predefined
							boolean_equals=yes
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="Yes, give me random enemies, mirrored for each player"
					[command]
						{VARIABLE uws_game.random_enemies yes}
						{VARIABLE uws_game.fog_mode no}
						{VARIABLE uws_game.full_random no}
					[/command]
				[/option]
				[option]
					message="Full random, each player gets different enemies"
					[command]
						{VARIABLE uws_game.random_enemies yes}
						{VARIABLE uws_game.fog_mode no}
						{VARIABLE uws_game.full_random yes}
					[/command]
				[/option]
			[/message]
		[/case]
		
		[case]
			value=after_classic
			
			{VARIABLE uws_game.scroll none}
			{VARIABLE uws_game.process_spawn_table no}
			{VARIABLE uws_game.mode_readable "PvP Survival"}
			{VARIABLE uws_game.loyal_units no}
			{VARIABLE uws_game.is_pvp yes}
			{VARIABLE uws_game.is_open_world yes}
			{VARIABLE uws_game.game_mode_info "Fight the copies sent to you and outplay your opponent."}
			{VARIABLE uws_game.win_condition "Survive the waves of enemies longer than your opponent"}
			{VARIABLE uws_game.objective_notes "You receive gold from villages and all recruited units cost upkeep.
Every few turns a new wave of enemies spawn. Survive as long as you can."}
			{VARIABLE uws_game.lose_condition "Your leader is defeated."}
			{VARIABLE uws_game.spawn_hidden_leaders no}
			{VARIABLE after_games.enable_spawn_copy_debuff yes}
			{VARIABLE uws_game.leader_can_die no}
			{VARIABLE uws_game.starting_gold 80}
			{VARIABLE uws_game.buff_modifier 1}
			{VARIABLE uws_game.small_buff_bonus 0}
			{VARIABLE uws_game.micro_buff_bonus 0}
			{VARIABLE select_options no}

			[message]
				speaker=narrator
				caption="Nasty common thug and thief"
				image="portraits/humans/thief.webp"
				message="Select a predefined set of game options or choose everything yourself:"
				[option]
					message="Classic progression, no fog, loot, mercenaries and boosts"
					[command]
						{VARIABLE after_games.progression classic}
						{VARIABLE after_games.is_info_hidden no}
						{VARIABLE after_games.allow_items yes}
						{VARIABLE after_games.allow_gold yes}
						{VARIABLE after_games.mercenaries_mode select}
						{VARIABLE after_games.boosts_mode select}
						{VARIABLE uws_game.fog_mode no}
								
						[modify_side]
							[filter_side]
								side=$uws_game.filter_human_sides
							[/filter_side]
							
						       	fog=no
						[/modify_side]
					[/command]
				[/option]
				[option]
					message="Classic progression, no fog, loot, mirrored random boosts"
					[command]
						{VARIABLE after_games.progression classic}
						{VARIABLE after_games.is_info_hidden no}
						{VARIABLE after_games.allow_items yes}
						{VARIABLE after_games.allow_gold yes}
						{VARIABLE after_games.mercenaries_mode none}
						{VARIABLE after_games_next_send copies}
						{VARIABLE after_games.boosts_mode random}
						{VARIABLE uws_game.fog_mode no}
								
						[modify_side]
							[filter_side]
								side=$uws_game.filter_human_sides
							[/filter_side]
							
						       	fog=no
						[/modify_side]
					[/command]
				[/option]
				[option]
					message="Bare game, Afterlife style"
					[command]
						{VARIABLE after_games.progression classic}
						{VARIABLE after_games.is_info_hidden no}
						{VARIABLE after_games.allow_items no}
						{VARIABLE after_games.allow_gold no}
						{VARIABLE after_games.mercenaries_mode none}
						{VARIABLE after_games_next_send copies}
						{VARIABLE after_games.boosts_mode none}
						{VARIABLE uws_game.fog_mode no}
								
						[modify_side]
							[filter_side]
								side=$uws_game.filter_human_sides
							[/filter_side]
							
						       	fog=no
						[/modify_side]
					[/command]
				[/option]
				[option]
					message="<span color='#cc615a'>I want to set all the options</span>"
					[command]
						{VARIABLE select_options yes}
					[/command]
				[/option]
			[/message]

			[if]
				[variable]
					name=select_options
					boolean_equals=yes
				[/variable]
				[then]
					[message]
						speaker=narrator
						caption="Bob"
						image="portraits/undead/zombie-goblin.png"
						message="What difficulty progression do you want to play?"
						[option]
							message="Classic: copies increase steadily (32%, 36%, 40%, 44%, etc) <span color='#368a42'>indicated</span>"
							[command]
								{VARIABLE after_games.progression classic}
								{VARIABLE after_games.is_info_hidden no}
							[/command]
						[/option]
						[option]
							message="Shuffled: same as classic but in random order <span color='#368a42'>indicated</span>"
							[command]
								{VARIABLE after_games.progression shuffled}
								{VARIABLE after_games.is_info_hidden no}
							[/command]
						[/option]
						[option]
							message="Mirrored random: all waves are random between 16% and 120% <span color='#368a42'>indicated</span>"
							[command]
								{VARIABLE after_games.progression mirrored}
								{VARIABLE after_games.is_info_hidden no}
							[/command]
						[/option]
						[option]
							message="Shuffled random: players get the same random values shuffled independently <span color='#a33131'>hidden</span>"
							[command]
								{VARIABLE after_games.progression random}
								{VARIABLE after_games.is_info_hidden yes}
							[/command]
						[/option]
						[option]
							message="Mirrored chaos: each unit gets a mirrored random value <span color='#a33131'>hidden</span>"
							[command]
								{VARIABLE after_games.progression chaos}
								{VARIABLE after_games.is_info_hidden yes}
							[/command]
						[/option]
						[option]
							message="Total chaos: each unit gets a completely random value <span color='#a33131'>hidden</span>"
							[command]
								{VARIABLE after_games.progression total_chaos}
								{VARIABLE after_games.is_info_hidden yes}
							[/command]
						[/option]
					[/message]

					[message]
						speaker=narrator
						caption="Master Tracker of the Grim Forest"
						image="portraits/humans/huntsman.png"
						message="Enable enemy leaders to carry loot?"
						[option]
							message="Yes, make the copies drop gold and items"
							[command]
								{VARIABLE after_games.allow_items yes}
								{VARIABLE after_games.allow_gold yes}
							[/command]
						[/option]
						[option]
							message="Make the copies drop items only"
							[command]
								{VARIABLE after_games.allow_items yes}
								{VARIABLE after_games.allow_gold no}
							[/command]
						[/option]
						[option]
							message="Make the copies drop only gold"
							[command]
								{VARIABLE after_games.allow_items yes}
								{VARIABLE after_games.allow_gold yes}
							[/command]
						[/option]
						[option]
							message="No, I want a bare game, just like original afterlife"
							[command]
								{VARIABLE after_games.allow_items no}
								{VARIABLE after_games.allow_gold no}
							[/command]
						[/option]
					[/message]
					
					[message]
						speaker=narrator
						caption="Swordmaster of the Southern Lands"
						image="portraits/uws/southern-lord.png"
						message="Allow mercenaries?
If you select players choose then for each waves players can select mercenaries to be sent instead of their units.
Alternatively, mirrored random sends the same unit-type-mercenaries for both players. Note that the leader copies are always of the higher player leader's level."
						[option]
							message="Yes, players choose"
							[command]
								{VARIABLE after_games.mercenaries_mode select}
							[/command]
						[/option]
						[option]
							message="Yes, always mirrored random"
							[command]
								{VARIABLE after_games.mercenaries_mode random}
							[/command]
						[/option]
						[option]
							message="No"
							[command]
								{VARIABLE after_games.mercenaries_mode none}
								{VARIABLE after_games_next_send copies}
							[/command]
						[/option]
					[/message]

					[message]
						speaker=narrator
						caption="Guardian of Bog"
						image="portraits/uws/striker.png"
						message="Allow wave boosts? Each boost can be used to either undermine the other player or increase your own chances of surviving.
If you select players choose then then each player gets 6 randomly selected boosts.
Alternatively, mirrored random randomly choses the same boost for both players for each wave."
						[option]
							message="Yes, players choose"
							[command]
								{VARIABLE after_games.boosts_mode select}
							[/command]
						[/option]
						[option]
							message="Yes, mirrored random"
							[command]
								{VARIABLE after_games.boosts_mode random}
							[/command]
						[/option]
						[option]
							message="No"
							[command]
								{VARIABLE after_games.boosts_mode none}
							[/command]
						[/option]
					[/message]

					[message]
						speaker=narrator
						caption="The All-Seeing Creep"
						image="portraits/uws/watcher.png"
						message="Fog or no fog?"
						[option]
							message="Fog, let's be sneaky"
							[command]
								{VARIABLE uws_game.fog_mode yes}
							[/command]
						[/option]
						[option]
							message="No fog, full visibility"
							[command]
								{VARIABLE uws_game.fog_mode no}
								
								[modify_side]
									[filter_side]
										side=$uws_game.filter_human_sides
									[/filter_side]
									
								       	fog=no
								[/modify_side]
							[/command]
						[/option]
					[/message]
				[/then]
			[/if]
		[/case]

		[case]
			value=arena

			{VARIABLE uws_game.scroll none}
			{VARIABLE uws_game.process_spawn_table yes}
			{VARIABLE uws_game.mode_readable "Arena"}
			{VARIABLE uws_game.loyal_units no}
			{VARIABLE uws_game.is_pvp yes}
			{VARIABLE uws_game.is_open_world yes}
			{VARIABLE uws_game.game_mode_info "Fight the copies sent to you and outplay your opponent."}
			{VARIABLE uws_game.win_condition "Survive the waves of enemies longer than your opponent"}
			{VARIABLE uws_game.objective_notes "You receive gold from villages and all recruited units cost upkeep.
Every few turns a new wave of enemies spawn. Survive as long as you can."}
			{VARIABLE uws_game.lose_condition "Your leader is defeated."}
			{VARIABLE uws_game.spawn_hidden_leaders no}
			{VARIABLE uws_game.leader_can_die no}
			{VARIABLE uws_game.starting_gold 80}
			{VARIABLE uws_game.buff_modifier 1}
			{VARIABLE uws_game.small_buff_bonus 0}
			{VARIABLE uws_game.micro_buff_bonus 0}
			{VARIABLE uws_game.difficulty 6}
			
			[message]
			    speaker=narrator
			    caption="Arena Guardian"
			    image="portraits/humans/grand-knight-2.png"
			    message="Welcome to the Quequo's Ultimate Wesnoth Survival. Before you enter the Arena, choose who you wish to challenge!"
			    [option]
			    	message="Arena Instructors   - <span color='#0ebeeb'> 3</span> waves, ~20 turns, <span color='#90d117'>Easy</span> difficulty"
			    	[command]
			    		{VARIABLE uws_game.arena_mode instructors}
			    		{VARIABLE uws_game.arena_limit 3}
			    	[/command]
			    [/option]
			    [option]
			    	message="Arena Guardians   - <span color='#1571d4'> 7</span> waves, ~40 turns, <span color='#f5a720'>Normal</span> difficulty"
			    	[command]
			    		{VARIABLE uws_game.arena_mode guardians}
			    		{VARIABLE uws_game.arena_limit 7}
			    	[/command]
			    [/option]
#			    [option]
#			    	message="Arena Masters       - <span color='#7043f7'>11</span> waves, ~65 turns, <span color='#eb6e2a'>Hard</span> difficulty"
#			    	[command]
#			    		{VARIABLE uws_game.arena_mode masters}
#			    		{VARIABLE uws_game.arena_limit 11}
#			    		{VARIABLE uws_game.buff_modifier 1.1}
#						{VARIABLE uws_game.small_buff_bonus 5}
#						{VARIABLE uws_game.micro_buff_bonus 5}
#			    	[/command]
#			    [/option]
#			    [option]
#			    	message="Arena Overlords   - <span color='#7f5bb0'>15</span> waves, ~90 turns, <span color='#eb2b09'>Hardcore</span> difficulty"
#			    	[command]
#			    		{VARIABLE uws_game.arena_mode overlords}
#			    		{VARIABLE uws_game.arena_limit 15}
#			    		{VARIABLE uws_game.buff_modifier 1.15}
#						{VARIABLE uws_game.small_buff_bonus 10}
#						{VARIABLE uws_game.micro_buff_bonus 5}
#			    	[/command]
#			    [/option]
#			    [option]
#			    	message="Arena Gods            - <span color='#9e4a9d'>19</span> waves, ~120 turns, <span color='#594847'>Expert</span> difficulty)"
#			    	[command]
#			    		{VARIABLE uws_game.arena_mode gods}
#			    		{VARIABLE uws_game.arena_limit 19}
#			    		{VARIABLE uws_game.buff_modifier 1.25}
#						{VARIABLE uws_game.small_buff_bonus 20}
#						{VARIABLE uws_game.micro_buff_bonus 10}
#			    	[/command]
#			    [/option]
			[/message]

			[message]
				speaker=narrator
				caption="Guardian of the Temple of the Moon"
				image="portraits/uws/warg.png"
				message="Do you also want to gamble with wesnoth RNG? (unit levels are always maintained)"
				[option]
					message="No, give me the predefined enemies, always the same"
					[command]
						{VARIABLE uws_game.random_enemies no}
						{VARIABLE uws_game.fog_mode no}
						{VARIABLE uws_game.full_random no}
					[/command]
					[show_if]
						[variable]
							name=uws_game.allow_predefined
							boolean_equals=yes
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="Yes, give me random enemies"
					[command]
						{VARIABLE uws_game.random_enemies yes}
						{VARIABLE uws_game.fog_mode no}
						{VARIABLE uws_game.full_random no}
					[/command]
				[/option]
				[option]
					message="Full random, no mirroring"
					[command]
						{VARIABLE uws_game.random_enemies yes}
						{VARIABLE uws_game.fog_mode no}
						{VARIABLE uws_game.full_random yes}
					[/command]
				[/option]
			[/message]
		[/case]
		
		[case]
			value=after_race
			
			{VARIABLE uws_game.scroll none}
			{VARIABLE uws_game.process_spawn_table no}
			{VARIABLE uws_game.mode_readable "PvP Race"}
			{VARIABLE uws_game.loyal_units no}
			{VARIABLE uws_game.is_pvp yes}
			{VARIABLE uws_game.is_open_world yes}
			{VARIABLE uws_game.game_mode_info "Fight the copies sent to you and outplay your opponent."}
			{VARIABLE uws_game.win_condition "Capture the flag before your opponent does."}
			{VARIABLE uws_game.objective_notes "You receive gold from villages and all recruited units cost upkeep.
Only the leader can capture the flag and only after you defeat all the enemy copies."}
			{VARIABLE uws_game.lose_condition "Your leader is defeated."}
			{VARIABLE uws_game.spawn_hidden_leaders no}
			{VARIABLE after_games.enable_spawn_copy_debuff yes}
			{VARIABLE uws_game.leader_can_die no}
			{VARIABLE uws_game.starting_gold 60}
			{VARIABLE uws_game.buff_modifier 1}
			{VARIABLE uws_game.small_buff_bonus 0}
			{VARIABLE uws_game.micro_buff_bonus 0}

			[message]
				speaker=narrator
				caption="Nasty common thug and thief"
				image="portraits/humans/thief+female.webp"
				message="Select a predefined set of game options or choose everything yourself:"
				[option]
					message="Full length flag capture, random progression, items, no gold and no fog"
					[command]
						{VARIABLE after_games.spawn_count 13}
						{VARIABLE after_games.victory_condition flag_capture}
						{VARIABLE after_games.progression mirrored}
						{VARIABLE after_games.is_info_hidden no}
						{VARIABLE after_games.allow_items yes}
						{VARIABLE after_games.allow_gold no}
						{VARIABLE uws_game.fog_mode no}
								
						[modify_side]
							[filter_side]
								side=$uws_game.filter_human_sides
							[/filter_side]
							
						       	fog=no
						[/modify_side]
					[/command]
				[/option]
				[option]
					message="11 waves, full pvp, shuffled progression, items and gold, fog enabled"
					[command]
						{VARIABLE after_games.spawn_count 11}
						{VARIABLE after_games.victory_condition pvp}
						{VARIABLE after_games.progression shuffled}
						{VARIABLE after_games.is_info_hidden no}
						{VARIABLE after_games.allow_items yes}
						{VARIABLE after_games.allow_gold yes}
						{VARIABLE uws_game.fog_mode yes}
					[/command]
				[/option]
				[option]
					message="Full speed flag capture, total chaos, no fog, no items, no gold"
					[command]
						{VARIABLE after_games.spawn_count 7}
						{VARIABLE after_games.victory_condition flag_capture}
						{VARIABLE after_games.progression total_chaos}
						{VARIABLE after_games.is_info_hidden yes}
						{VARIABLE after_games.allow_items no}
						{VARIABLE after_games.allow_gold no}
						{VARIABLE uws_game.fog_mode no}
								
						[modify_side]
							[filter_side]
								side=$uws_game.filter_human_sides
							[/filter_side]
							
						       	fog=no
						[/modify_side]
					[/command]
				[/option]
				[option]
					message="Flag capture, Afterlife Race style"
					[command]
						{VARIABLE after_games.spawn_count 11}
						{VARIABLE after_games.victory_condition flag_capture}
						{VARIABLE after_games.progression classic}
						{VARIABLE after_games.is_info_hidden no}
						{VARIABLE after_games.allow_items no}
						{VARIABLE after_games.allow_gold no}
						{VARIABLE uws_game.fog_mode no}
								
						[modify_side]
							[filter_side]
								side=$uws_game.filter_human_sides
							[/filter_side]
							
						       	fog=no
						[/modify_side]
					[/command]
				[/option]
				[option]
					message="<span color='#cc615a'>I want to set all the options</span>"
					[command]
						{VARIABLE select_options yes}
					[/command]
				[/option]
			[/message]

			{VARIABLE after_games.mercenaries_mode none}
			{VARIABLE after_games_next_send copies}
			{VARIABLE after_games.boosts_mode none}

			[if]
				[variable]
					name=select_options
					boolean_equals=yes
				[/variable]
				[then]
					[message]
						speaker=narrator
						caption="Master Horseman at Royal Stables"
						image="portraits/uws/horse-lancer.png"
						message="How many spawn waves do you prefer?"
						[option]
							message="A fast paced race, 7 waves"
							[command]
								{VARIABLE after_games.spawn_count 7}
							[/command]
						[/option]
						[option]
							message="Medium length game, 9 waves"
							[command]
								{VARIABLE after_games.spawn_count 9}
							[/command]
						[/option]
						[option]
							message="More strategically demanding, 11 waves"
							[command]
								{VARIABLE after_games.spawn_count 11}
							[/command]
						[/option]
						[option]
							message="Full game, 13 waves"
							[command]
								{VARIABLE after_games.spawn_count 13}
							[/command]
						[/option]
					[/message]

					[message]
						speaker=narrator
						caption="Brutus"
						image="portraits/monsters/ogre.webp"
						message="And what about the victory condition?

		Flag capture - first player to defeat all waves and send their leader to capture the flag wins.

		Final PvP - once one of the players defeats all the waves, a small gap opens between the players for PvP fight."
						[option]
							message="Flag capture"
							[command]
								{VARIABLE after_games.victory_condition flag_capture}
							[/command]
						[/option]
						[option]
							message="Final PvP"
							[command]
								{VARIABLE after_games.victory_condition pvp}
							[/command]
						[/option]
					[/message]

					[message]
						speaker=narrator
						caption="Bob"
						image="portraits/undead/zombie-goblin.png"
						message="What difficulty progression do you want to play?"
						[option]
							message="Classic: copies increase steadily (32%, 36%, 40%, 44%, etc) <span color='#368a42'>indicated</span>"
							[command]
								{VARIABLE after_games.progression classic}
								{VARIABLE after_games.is_info_hidden no}
							[/command]
						[/option]
						[option]
							message="Shuffled: same as classic but in random order <span color='#368a42'>indicated</span>"
							[command]
								{VARIABLE after_games.progression shuffled}
								{VARIABLE after_games.is_info_hidden no}
							[/command]
						[/option]
						[option]
							message="Mirrored random: all waves are random between 16% and 120% <span color='#368a42'>indicated</span>"
							[command]
								{VARIABLE after_games.progression mirrored}
								{VARIABLE after_games.is_info_hidden no}
							[/command]
						[/option]
						[option]
							message="Shuffled random: players get the same random values shuffled independently <span color='#a33131'>hidden</span>"
							[command]
								{VARIABLE after_games.progression random}
								{VARIABLE after_games.is_info_hidden yes}
							[/command]
						[/option]
						[option]
							message="Mirrored chaos: each unit gets a mirrored random value <span color='#a33131'>hidden</span>"
							[command]
								{VARIABLE after_games.progression chaos}
								{VARIABLE after_games.is_info_hidden yes}
							[/command]
						[/option]
						[option]
							message="Total chaos: each unit gets a completely random value <span color='#a33131'>hidden</span>"
							[command]
								{VARIABLE after_games.progression total_chaos}
								{VARIABLE after_games.is_info_hidden yes}
							[/command]
						[/option]
					[/message]

					[message]
						speaker=narrator
						caption="Master Tracker of the Grim Forest"
						image="portraits/humans/huntsman.png"
						message="Enable enemy leaders to carry loot?"
						[option]
							message="Yes, make the copies drop gold and items"
							[command]
								{VARIABLE after_games.allow_items yes}
								{VARIABLE after_games.allow_gold yes}
							[/command]
						[/option]
						[option]
							message="Make the copies drop items only"
							[command]
								{VARIABLE after_games.allow_items yes}
								{VARIABLE after_games.allow_gold no}
							[/command]
						[/option]
						[option]
							message="Make the copies drop only gold"
							[command]
								{VARIABLE after_games.allow_items yes}
								{VARIABLE after_games.allow_gold yes}
							[/command]
						[/option]
						[option]
							message="No, I want a bare game, just like original afterlife"
							[command]
								{VARIABLE after_games.allow_items no}
								{VARIABLE after_games.allow_gold no}
							[/command]
						[/option]
					[/message]
					
		#			[message]
		#				speaker=narrator
		#				caption="Swordmaster of the Southern Lands"
		#				image="portraits/uws/southern-lord.png"
		#				message="Allow mercenaries?
		#If you select players choose then for each waves players can select mercenaries to be sent instead of their units.
		#Alternatively, mirrored random sends the same unit-type-mercenaries for both players. Note that the leader copies are always of the higher player leader's level."
		#				[option]
		#					message="Yes, players choose"
		#					[command]
		#						{VARIABLE after_games.mercenaries_mode select}
		#					[/command]
		#				[/option]
		#				[option]
		#					message="Yes, always mirrored random"
		#					[command]
		#						{VARIABLE after_games.mercenaries_mode random}
		#					[/command]
		#				[/option]
		#				[option]
		#					message="No"
		#					[command]
		#						{VARIABLE after_games.mercenaries_mode none}
		#						{VARIABLE after_games_next_send copies}
		#					[/command]
		#				[/option]
		#			[/message]

					{VARIABLE after_games.mercenaries_mode none}
					{VARIABLE after_games_next_send copies}
					{VARIABLE after_games.boosts_mode none}

		#			[message]
		#				speaker=narrator
		#				caption="Guardian of Bog"
		#				image="portraits/uws/striker.png"
		#				message="Allow wave boosts? Each boost can be used to either undermine the other player or increase your own chances of surviving.
		#If you select players choose then then each player gets 6 randomly selected boosts.
		#Alternatively, mirrored random randomly choses the same boost for both players for each wave."
		#				[option]
		#					message="Yes, players choose"
		#					[command]
		#						{VARIABLE after_games.boosts_mode select}
		#					[/command]
		#				[/option]
		#				[option]
		#					message="Yes, mirrored random"
		#					[command]
		#						{VARIABLE after_games.boosts_mode random}
		#					[/command]
		#				[/option]
		#				[option]
		#					message="No"
		#					[command]
		#						{VARIABLE after_games.boosts_mode none}
		#					[/command]
		#				[/option]
		#			[/message]

					[message]
						speaker=narrator
						caption="The All-Seeing Creep"
						image="portraits/uws/watcher.png"
						message="Fog or no fog?"
						[option]
							message="Fog, let's be sneaky"
							[command]
								{VARIABLE uws_game.fog_mode yes}
							[/command]
						[/option]
						[option]
							message="No fog, full visibility"
							[command]
								{VARIABLE uws_game.fog_mode no}
								
								[modify_side]
									[filter_side]
										side=$uws_game.filter_human_sides
									[/filter_side]
									
								       	fog=no
								[/modify_side]
							[/command]
						[/option]
					[/message]
				[/then]
			[/if]
		[/case]

		[case]
			value=pillagers
			
			{VARIABLE uws_game.scroll turn_based}
			{VARIABLE uws_game.process_spawn_table yes}
			{VARIABLE uws_game.mode_readable "Pillagers"}
			{VARIABLE uws_game.loyal_units no}
			{VARIABLE uws_game.is_pvp no}
			{VARIABLE uws_game.is_open_world yes}
			{VARIABLE uws_game.game_mode_info "Fight through the hordes of pillagers to protect your vilagers."}
			{VARIABLE uws_game.win_condition "Survive all the waves of enemies and defeat the Butcher of Wesnoth."}
			{VARIABLE uws_game.objective_notes "You pay upkeep for your troops, and earn income from villages.
You can get gold from some enemies or casual treasures."}
			
			{VARIABLE starting_gold_easy 145}
			{VARIABLE starting_gold_normal 130}
			{VARIABLE starting_gold_hard 115}
			{VARIABLE starting_gold_hardcore 100}
			{VARIABLE uws_game.shared_gold yes}
			
			[if]
				[variable]
					name=uws_game.single_player_game
					boolean_equals=yes
				[/variable]
				[then]
					{VARIABLE starting_gold_easy 290}
					{VARIABLE starting_gold_normal 260}
					{VARIABLE starting_gold_hard 230}
					{VARIABLE starting_gold_hardcore 200}
					{VARIABLE uws_game.shared_gold no}
				[/then]
			[/if]
			
			[message]
				speaker=narrator
				caption="Eternal Bones of the Nameless One"
				image="portraits/uws/cloaked.png"
				message="Choose your challenge now:"
				[option]
					message="<span color='#90d117'>Easy</span> - weaker enemies, 75% bonus penalty, $starting_gold_easy gold, leader <span color='#42a83e'>can</span> die"
					[command]
						{VARIABLE uws_game.difficulty_readable Easy}
						{VARIABLE uws_game.spawn_easy_enemies yes}
						{VARIABLE uws_game.difficulty 2}
						{VARIABLE uws_game.buff_modifier 0.75}
						{VARIABLE uws_game.small_buff_bonus 0}
						{VARIABLE uws_game.micro_buff_bonus 0}
						{VARIABLE uws_game.starting_gold $starting_gold_easy}
						{VARIABLE uws_game.leader_can_die yes}
						{VARIABLE uws_game.lose_condition "Your army is defeated."}
					[/command]
				[/option]
				[option]
					message="<span color='#f5a720'>Normal</span> - standard enemies, $starting_gold_normal gold, leader <span color='#42a83e'>can</span> die"
					[command]
						{VARIABLE uws_game.difficulty_readable Normal}
						{VARIABLE uws_game.difficulty 2}
						{VARIABLE uws_game.buff_modifier 1}
						{VARIABLE uws_game.small_buff_bonus 0}
						{VARIABLE uws_game.micro_buff_bonus 0}
						{VARIABLE uws_game.starting_gold $starting_gold_normal}
						{VARIABLE uws_game.leader_can_die yes}
						{VARIABLE uws_game.lose_condition "Your army is defeated."}
					[/command]
				[/option]
				[option]
					message="<span color='#eb6e2a'>Hard</span> - a few extra enemies, 110% bonus penalty, $starting_gold_hard gold, leader <span color='#f02d26'>must not</span> die"
					[command]
						{VARIABLE uws_game.difficulty_readable Hard}
						{VARIABLE uws_game.difficulty 3}
						{VARIABLE uws_game.buff_modifier 1.1}
						{VARIABLE uws_game.small_buff_bonus 5}
						{VARIABLE uws_game.micro_buff_bonus 0}
						{VARIABLE uws_game.starting_gold $starting_gold_hard}
						{VARIABLE uws_game.leader_can_die no}
						{VARIABLE uws_game.lose_condition "Your leader is defeated."}
					[/command]
				[/option]
				[option]
					message="<span color='#853431'>Hardcore</span> - extra enemies, 125% bonus penalty, $starting_gold_hardcore gold, leader <span color='#f02d26'>must not</span> die"
					[command]
						{VARIABLE uws_game.difficulty_readable Hardcore}
						{VARIABLE uws_game.difficulty 4}
						{VARIABLE uws_game.buff_modifier 1.25}
						{VARIABLE uws_game.small_buff_bonus 10}
						{VARIABLE uws_game.micro_buff_bonus 5}
						{VARIABLE uws_game.starting_gold $starting_gold_hardcore}
						{VARIABLE uws_game.leader_can_die no}
						{VARIABLE uws_game.lose_condition "Your leader is defeated."}
					[/command]
				[/option]
			[/message]
			
			{CLEAR_VARIABLE starting_gold_easy}
			{CLEAR_VARIABLE starting_gold_normal}
			{CLEAR_VARIABLE starting_gold_hard}
			{CLEAR_VARIABLE starting_gold_hardcore}
			
			[message]
				speaker=narrator
				caption="Guardian of the Temple of the Moon"
				image="portraits/uws/warg.png"
				message="Do you also want to gamble with wesnoth RNG? (unit levels are always maintained)"
				[option]
					message="No, give me the predefined enemies, always the same"
					[command]
						{VARIABLE uws_game.random_enemies no}
						{VARIABLE uws_game.fog_mode no}
						{VARIABLE uws_game.full_random no}
					[/command]
					[show_if]
						[variable]
							name=uws_game.allow_predefined
							boolean_equals=yes
						[/variable]
					[/show_if]
				[/option]
				[option]
					message="Yes, give me random enemies"
					[command]
						{VARIABLE uws_game.random_enemies yes}
						{VARIABLE uws_game.fog_mode no}
						{VARIABLE uws_game.full_random no}
					[/command]
				[/option]
			[/message]
		[/case]
	[/switch]
	
	{GENERATE_RANK_RELATED_VARIABLES}
	{GENERATE_GAME_DESCRIPTION_AFTER_SETTINGS}
#enddef

#define GENERATE_GAME_DESCRIPTION_AFTER_SETTINGS
	[lua]
		name=uws_game_info_message
	    code = <<
	        local version = wml.variables['uws_game.version']
	        local is_campaign = wml.variables['uws_game.is_campaign']
	        local random_waves = wml.variables["uws_game.random_enemies"]
	        local fog_mode = wml.variables["uws_game.fog_mode"]
	        local minimum_info_labels = wml.variables["uws_game.minimum_info_labels"]
	        local full_random = wml.variables["uws_game.full_random"]
	        local difficulty = wml.variables["uws_game.difficulty_readable"]
	        local leader = wml.variables["uws_game.leader_can_die"]
	        local game_mode = wml.variables["uws_game.mode"]
	        local mode_readable = wml.variables["uws_game.mode_readable"]
	        local after_games_mercenaries = wml.variables["after_games.mercenaries_mode"]
	        local after_games_allow_items = wml.variables['after_games.allow_items']
	        local after_games_allow_gold = wml.variables['after_games.allow_gold']
	        local after_games_boosts = wml.variables["after_games.boosts_mode"]
	        local after_race_spawn_count = wml.variables["after_games.spawn_count"]
	        local after_progression = wml.variables["after_games.progression"]
	        local map_info = wml.variables["uws_game.name"]
	        local allow_ae = wml.variables["random_pool.allow_ae"]
	        local allow_wotg = wml.variables["random_pool.allow_wotg"]
	        local rol_units = wml.variables["random_pool.allow_rol"]
	        local eoma_units = wml.variables["random_pool.allow_eoma"]
	        local arena_mode = wml.variables["uws_game.arena_mode"]
	        local after_race_win_condition = wml.variables['after_games.victory_condition']
	        local win_condition = ''
	        local info_data = ''
	        local wave_mode_all = { 'Default', }
	        
	        local fog_mode_str = 'no'
	        if fog_mode == true then
	        	fog_mode_str = 'yes'
	        elseif minimum_info_labels == true then
	        	fog_mode_str = 'levels only'
	        end
	        
	        local randomised_str = 'no'
	        if random_waves == true then
	        	if full_random == true then
	 			randomised_str = 'full random'
	 		else
	 			if game_mode == 'slash' then
	 				randomised_str = 'yes'
	 			else
	 				randomised_str = 'mirrored random'
	 			end
	 		end
	        end
	        
	        local leader_str = 'no'
	        if leader == true then
	        	leader_str = 'yes'
	        end
	        
	        if allow_ae then
	        	table.insert(wave_mode_all, 'Ageless')
	       	end
	       	
	        if allow_wotg then
	        	table.insert(wave_mode_all, 'WotG')
	        end
	        
	        if rol_units then
	        	table.insert(wave_mode_all, 'Reign of Lords')
	        end
	        
	        if eoma_units then
	        	table.insert(wave_mode_all, 'EoMa')
	        end
	        
	        local after_spawns_str = ''
	        if after_games_mercenaries == 'select' then
	        	after_spawns_str = 'Mercenaries'
	        elseif after_games_mercenaries == 'random' then
	        	after_spawns_str = 'Random Mercenaries'
	        else
	        	after_spawns_str = 'Copies only'
	        end

	        if after_games_allow_gold then
	        	after_spawns_str = after_spawns_str .. ', Gold'
	        end

	        if after_games_allow_items then
	        	after_spawns_str = after_spawns_str .. ', Items'
	        end

	        if after_games_boosts == 'select' then
	        	after_spawns_str = after_spawns_str .. ', Boosts'
	        elseif after_games_boosts == 'random' then
	        	after_spawns_str = after_spawns_str .. ', Random Boosts'
	        end

	        local after_progression_str = ''
	        if after_progression == 'classic' then
	        	after_progression_str = 'Classic'
	        elseif after_progression == 'shuffled' then
	        	after_progression_str = 'Shuffled'
	        elseif after_progression == 'mirrored' then
	        	after_progression_str = 'Mirrored Random'
	        elseif after_progression == 'random' then
	        	after_progression_str = 'Shuffled Random'
	        elseif after_progression == 'chaos' then
	        	after_progression_str = 'Chaos'
	        elseif after_progression == 'total_chaos' then
	        	after_progression_str = 'Total Chaos'
	        end

	        if game_mode == 'after_race' then
	        	after_progression_str = after_progression_str .. ' (' .. after_race_spawn_count .. ' waves)'

	        	win_condition = 'PvP Battle'
	        	if after_race_win_condition == 'flag_capture' then
	        		win_condition = 'Flag Capture'
	        	end
	        end

	        local mod_name = "Quequo's Ultimate Wesnoth Survival v." .. version
	        local game_settings = 'Map: ' .. map_info .. ' | Game mode: ' .. mode_readable .. ' | Spawn: ' .. table.concat(wave_mode_all, ', ')
	        local map_settings = ''
	        if game_mode == 'scroll' or game_mode == 'race' or game_mode == 'slash' or game_mode == 'pillagers' then
	        	map_settings = 'Challenge: ' .. difficulty .. ' | Leader can die: ' .. leader_str  .. ' | Randomised waves: ' .. randomised_str
	        	
	        	if game_mode == 'scroll' then
	        		map_settings = map_settings .. ' | Fog mode: ' .. fog_mode_str
	        	end
	        elseif game_mode == 'arena' then
	        	map_settings = 'Challenge: ' .. arena_mode .. ' | Leader can die: ' .. leader_str  .. ' | Randomised waves: ' .. randomised_str
	        elseif game_mode == 'after_classic' or game_mode == 'after_race' then
	        	map_settings = 'Waves: ' .. after_spawns_str .. ' | Progression: ' .. after_progression_str .. ' | Fog mode: ' .. fog_mode_str

	        	if game_mode == 'after_race' then
	        		map_settings = 'Win condition: ' .. win_condition .. ' | ' .. map_settings
	        	end
	        else
	        	map_settings = 'Leader can die: ' .. leader_str  .. ' | Spawns: ' .. after_spawns_str .. ' | Progression: ' .. after_progression_str .. ' | Fog mode: ' .. fog_mode_str
	        end
	        
	        wesnoth.interface.add_chat_message(mod_name, game_settings)
	        wesnoth.interface.add_chat_message(mod_name, map_settings)
	        
	        if random_waves == true then
	        	local random_pool_str = "Random pool: " .. wml.variables["random_pool.count_0"] .. "(lvl0), "
	        	random_pool_str = random_pool_str .. wml.variables["random_pool.count_1"] .. "(lvl1), "
	        	random_pool_str = random_pool_str .. wml.variables["random_pool.count_2"] .. "(lvl2), "
	        	random_pool_str = random_pool_str .. wml.variables["random_pool.count_3"] .. "(lvl3), "
	        	random_pool_str = random_pool_str .. wml.variables["random_pool.count_4"] .. "(lvl4), "
	        	random_pool_str = random_pool_str .. wml.variables["random_pool.count_5"] .. "(lvl5), "
	        	random_pool_str = random_pool_str .. wml.variables["random_pool.count_6"] .. "(lvl6), "
	        	random_pool_str = random_pool_str .. wml.variables["random_pool.count_7"] .. "(lvl7) "
	        	random_pool_str = random_pool_str .. " *TOTAL*=" .. wml.variables["random_pool.all_count"]
	        	
	        	wesnoth.interface.add_chat_message(mod_name, random_pool_str)
	        end
	        
	        info_data = game_settings .. '\
' .. map_settings

		if is_campaign then
			wesnoth.interface.add_chat_message(mod_name, "The UWS Campaign is in it's alpha release. Some bugs may be present and things may not work as expected. Please message quequo if things are not working.")
		end
	        
	        wml.variables['game_info_data'] = info_data
	    >>
	[/lua]
	
	[objectives]
		summary=$uws_game.game_mode_info
		[objective]
			description=$uws_game.win_condition
			condition=win
		[/objective]
		[objective]
			description=$uws_game.lose_condition
			condition=lose
		[/objective]

		[note]
			description=$uws_game.objective_notes
		[/note]
		note="
<span color='#9999FF'>Created by quequo  (Version {UWS_VERSION})</span>
Big thanks to IPS, MasterChi3f, Rudko44 and zen-cat for all the help with testing and balancing."
	[/objectives]
#enddef


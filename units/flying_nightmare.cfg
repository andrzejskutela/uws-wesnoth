[unit_type]
	id=QQ_flying_nightmare
	name="Nightmare of Alhazred"
	race=monster
	undead_variation=human
    ignore_global_traits=yes
	image="units/uws/flying_nightmare.png"
	hitpoints=98
	movement_type=smallfly
	movement=7
	experience=200
	level=5
	alignment=chaotic
	advances_to=null
	{AMLA_DEFAULT}
	cost=150
	[resistance]
		blade=90
		pierce=130
		impact=70
		fire=60
		cold=40
		arcane=60
	[/resistance]
	[movement_costs]
		shallow_water=1
		reef=1
		swamp_water=1
		deep_water=2
		flat=1
		sand=1
		forest=2
		hills=1
		mountains=2
		village=1
		castle=1
		cave=1
		frozen=1
		fungus=1
	[/movement_costs]
	[defense]
		shallow_water=50
		reef=50
		swamp_water=50
		deep_water=60
		flat=50
		sand=50
		forest=60
		hills=50
		mountains=50
		village=60
		castle=60
		cave=60
		frozen=50
		fungus=50
	[/defense]
	usage=mixed fighter
	description= _ "Observers are formed from flying eyes. On their skin, eyes grow further, which eventually fall in to create your own body again. Process is then repeated from the beginning.."+{SPECIAL_NOTES}+{SPECIAL_NOTES_FIRSTSTRIKE}+{SPECIAL_NOTES_DRAIN}+{SPECIAL_NOTES_MARKSMAN}+{SPECIAL_NOTES_SLOW}
    die_sound=groan.wav
	{DEFENSE_ANIM "units/uws/flying_nightmare.png" "units/uws/flying_nightmare.png" {SOUND_LIST:LICH_HIT} }
	die_sound=lich-die.wav
	[abilities]
    	[chance_to_hit]
    		id=QQ_beholder_aura
    		name="all seeing eye 15"
            description="This unit can see everything present, future and past. All adjacent enemy units receive -15 chance to hit penalty, while all friendly units receive +15 chance to hit."
    		sub=15
    		cumulative=yes
    		affect_self=no
    		affect_allies=no
    		affect_enemies=yes
    		[affect_adjacent]
    		    [filter]
    		    [/filter]
    		[/affect_adjacent]
    	[/chance_to_hit]
    	[chance_to_hit]
    		id=QQ_beholder_aura
    		add=15
    		cumulative=yes
    		affect_self=yes
    		affect_allies=yes
    		affect_enemies=no
    		[affect_adjacent]
    		    [filter]
    		    [/filter]
    		[/affect_adjacent]
	    [/chance_to_hit]
    [/abilities]

	[attack]
        name=tongue
        description="tongue"
        icon="attacks/tongue.png"
        type=impact
        range=melee
        damage=15
        number=2
        [specials]
            {WEAPON_SPECIAL_MARKSMAN}
            {WEAPON_SPECIAL_SLOW}
            [dummy]
            	id=qquws_sticky_tongue
            	name="sticky tongue"
           		description="Enemy hit with the sticky tongue loses all mp for two turns."
            [/dummy]
        [/specials]
    [/attack]
	[attack]
		name=swallow
		description="swallow"
		icon="attacks/fangs.png"
		type=fire
		[specials]
			[drains]
		        id=drains
		        name="drains 35%"
		        description="This unit drains health from living units, healing itself for 35% of the amount of damage it deals (rounded down)."
		        value=35
		    [/drains]
			[dummy]
				id=qquws_digest_the_dead
				name="digest the dead"
				description="When this unit kills another, it reheals all the hitpoints."
			[/dummy]
			[disable]
                id=qquws_offense_only
                name="attack only"
                description="This weapon is only available in offense."
                active_on=defense
            [/disable]
		[/specials]
		range=melee
		damage=17
		number=3
	[/attack]
	
    [attack]
        name=gaze
        description="gaze"
        icon="attacks/gaze.png"
        type=arcane
        range=ranged
        damage=50
        number=1
        accuracy=15
        [specials]
            [drains]
		        id=drains
		        name="drains 65%"
		        description="This unit drains health from living units, healing itself for 65% of the amount of damage it deals (rounded down)."
		        value=65
		    [/drains]
        [/specials]
    [/attack]

	[attack_anim]
		[filter_attack]
			name=swallow
		[/filter_attack]
		hits=yes
		[frame]
			begin=-100
			end=100
			image="units/uws/flying_nightmare.png"
			sound=bite.ogg
		[/frame]
		[frame]
			begin=100
			end=200
			image="units/uws/flying_nightmare.png"
		[/frame]
	[/attack_anim]
	[attack_anim]
		[filter_attack]
			name=swallow
		[/filter_attack]
		hits=no
		[frame]
			begin=-100
			end=100
			image="units/uws/flying_nightmare.png"
			sound={SOUND_LIST:MISS}
		[/frame]
		[frame]
			begin=100
			end=200
			image="units/uws/flying_nightmare.png"
		[/frame]
	[/attack_anim]
		[attack_anim]
		[filter_attack]
			name=tongue
		[/filter_attack]
		hits=yes
		[frame]
			begin=-100
			end=100
			image="units/uws/flying_nightmare.png"
			sound=claws.ogg
		[/frame]
		[frame]
			begin=100
			end=200
			image="units/uws/flying_nightmare.png"
		[/frame]
	[/attack_anim]
	[attack_anim]
		[filter_attack]
			name=tongue
		[/filter_attack]
		hits=no
		[frame]
			begin=-100
			end=100
			image="units/uws/flying_nightmare.png"
			sound={SOUND_LIST:MISS}
		[/frame]
		[frame]
			begin=100
			end=200
			image="units/uws/flying_nightmare.png"
		[/frame]
	[/attack_anim]
[/unit_type]
